<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >


<mapper namespace="memberMapper">
	<resultMap type="member" id="memberResultSet">
		<result column="m_idx" property="idx"></result>
		<result column="m_phone" property="phone"></result>
		<result column="m_nickname" property="nickname"></result>
		<result column="m_join_date" property="joinDate"></result>
		<result column="m_delete_date" property="deleteDate"></result>

		<result column="m_profile" property="profile"></result>
		<result column="m_profile_path" property="profilePath"></result>
		<result column="m_profile_origin" property="profileOrigin"></result>
		
		<result column="m_id" property="id"></result>
		<result column="m_pwd" property="pwd"></result>
		
		<result column="sns_id" property="snsId"></result>
		<result column="sns_type" property="snsType"></result>
	</resultMap>
	
	<select id="selectMember" resultMap="memberResultSet">
		SELECT * FROM MEMBER
		WHERE m_idx = #{memberIdx}
	</select>
		
	<select id="selectNickname" resultType="String">
		SELECT m_nickname FROM MEMBER
		WHERE m_idx = #{memberIdx}
	</select>	
	
	<update id="updateProfile" parameterType="Member">
		UPDATE MEMBER
		SET m_nickname = #{nickname}, 
			m_profile = #{profile}, 
			m_profile_path = #{profilePath}, 
			m_profile_origin = #{profileOrigin}, 
			m_pwd = #{pwd}
		WHERE m_idx = #{memberIdx} 	
		
	</update>
	
	<select id="nicknameCheck" resultType="_int">
		SELECT COUNT(*) FROM MEMBER
		WHERE m_nickname = #{nickname}
	</select>
		
	<select id="checkPhone" resultType="_int">
		SELECT COUNT(*) FROM MEMBER
		WHERE m_phone = #{phone}
	</select>	
	
	<select id="checkIdx" resultType="_int">
		SELECT m_idx FROM MEMBER
		WHERE m_phone = #{phone}
	</select>	
	
</mapper>